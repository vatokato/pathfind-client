(window["webpackJsonppathfind-client"]=window["webpackJsonppathfind-client"]||[]).push([[0],{20:function(e,t,a){e.exports=a(32)},30:function(e,t,a){},31:function(e,t,a){},32:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(9),l=a.n(c),o=a(11),i=a(2),p=a(19),s=a(17);function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(a,!0).forEach(function(t){Object(s.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var m={distance:"",places:[{name:"",x:"",y:"",z:""},{name:"",x:"",y:"",z:""}]},h=Object(i.c)({path:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_DISTANCE_SUCCESS":return d({},e,{distance:t.payload});case"ADD_PLACE":return d({},e,{places:[].concat(Object(p.a)(e.places),[t.payload])});case"DEL_PLACE":return e.places.splice(t.payload,1),d({},e,{places:e.places});default:return e}}}),f=a(18),y=(a(30),a(31),a(4)),v=a(5),E=a(7),b=a(6),g=a(8),C=function(e){function t(){var e,a;Object(y.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(E.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).handlerPlaceDelClick=function(e){a.props.delPlace(a.props.ind)},a.handlerPlaceClearClick=function(e){a.props.place.name="",a.props.place.x="",a.props.place.y="",a.props.place.z="",a.forceUpdate()},a.handlerPlaceRandClick=function(e){a.props.place.x=parseInt(1e3*Math.random()),a.props.place.y=parseInt(1e3*Math.random()),a.props.place.z=parseInt(10*Math.random()),a.forceUpdate()},a.handlerTextChange=function(e){a.props.place[e.target.dataset.name]=e.target.value,a.forceUpdate()},a}return Object(g.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){console.log("Place render");var e=this.props.place,t=e.name,a=e.x,n=e.y,c=e.z,l=this.props.ind;return r.a.createElement("div",{className:"input-group"},r.a.createElement("div",{className:"input-text-container"},r.a.createElement("input",{type:"text",name:"name"+l,"data-name":"name",placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435",value:t,onChange:this.handlerTextChange})),r.a.createElement("div",{className:"input-text-container -sm"},r.a.createElement("input",{type:"text",name:"x"+l,"data-name":"x",placeholder:"x",value:a,onChange:this.handlerTextChange})),r.a.createElement("div",{className:"input-text-container -sm"},r.a.createElement("input",{type:"text",name:"y"+l,"data-name":"y",placeholder:"y",value:n,onChange:this.handlerTextChange})),r.a.createElement("div",{className:"input-text-container -sm"},r.a.createElement("input",{type:"text",name:"z"+l,"data-name":"z",placeholder:"z",value:c,onChange:this.handlerTextChange})),r.a.createElement("div",{className:"action-rand-container",onClick:this.handlerPlaceRandClick,title:"random"},r.a.createElement("span",null,"r")),r.a.createElement("div",{className:"action-clear-container",onClick:this.handlerPlaceClearClick,title:"clear"},r.a.createElement("span",null,"c")),r.a.createElement("div",{className:"action-del-container",onClick:this.handlerPlaceDelClick,title:"delete"},r.a.createElement("span",null,"x")))}}]),t}(r.a.Component),O=function(e){function t(){var e,a;Object(y.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(E.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).onSubmit=function(e){e.preventDefault();var t=e.target,n=[],r=e.target.querySelector("input[type=submit]");r.disabled=!0,t.querySelectorAll(".place").forEach(function(e,a){n.push({name:t["name"+a].value,x:t["x"+a].value,y:t["y"+a].value,z:t["z"+a].value})}),a.props.getDistance(n,function(){r.disabled=!1})},a.handleAddPlaceClick=function(e){e.preventDefault(),a.props.addPlace({name:"",x:"",y:"",z:""})},a}return Object(g.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){var e=this;console.log("Form render",this.props);var t=this.props.places||[];return r.a.createElement("form",{onSubmit:this.onSubmit},t.map(function(t,a){return r.a.createElement("section",{className:"place",key:a},r.a.createElement(C,{ind:a,place:t,delPlace:e.props.delPlace}))}),r.a.createElement("button",{onClick:this.handleAddPlaceClick},"+ \u043c\u0435\u0441\u0442\u043e"),r.a.createElement("input",{type:"submit",value:"\u0420\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u0442\u044c \u0434\u043b\u0438\u043d\u0443 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430"}))}}]),t}(r.a.Component),x="http://134.0.119.35:3001/path",P=function(e,t){return function(a){a({type:"GET_DISTANCE_REQUEST"});var n=0,r="";Promise.all(function(e){for(var t=[],a=0;a<e.length-1;a++)t.push(fetch(x,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({name1:e[a].name,x1:e[a].x,y1:e[a].y,z1:e[a].z,name2:e[a+1].name,x2:e[a+1].x,y2:e[a+1].y,z2:e[a+1].z})}).then(function(e){return e.json()}));return t}(e)).then(function(e){var c=0;e.forEach(function(t,a){c+=t.distance;var l=t.name1||(0===a?"\u043d\u0430\u0447\u0430\u043b\u0430":""),o=t.name2||(a===e.length-1?"\u043a\u043e\u043d\u0446\u0430":"");l&&(r+="\u043e\u0442 "+l),o&&(r+=" \u0434\u043e "+o+" "+Math.floor(100*c)/100+" \u043c; ",c=0),n+=t.distance}),t(),a({type:"GET_DISTANCE_SUCCESS",payload:{text:r,total:Math.floor(100*n)/100}})}).catch(function(e){t(),a({type:"GET_DISTANCE_ERROR",payload:e})})}};var j=function(e){function t(){return Object(y.a)(this,t),Object(E.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){console.log("FormContainer render",this.props);var e=this.props.path,t=e.distance,a=e.places;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"form-container"},r.a.createElement(O,{getDistance:this.props.getDistance,addPlace:this.props.addPlace,delPlace:this.props.delPlace,places:a})),t.total>0&&r.a.createElement("div",{className:"result"},r.a.createElement("div",{className:"distance-total"},"\u041e\u0431\u0449\u0430\u044f \u0434\u043b\u0438\u043d\u0430 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430: ",t.total," \u043c."),r.a.createElement("div",{className:"distance-text"},t.text)))}}]),t}(r.a.Component),D=Object(o.b)(function(e){return{path:e.path}},function(e){return{addPlace:function(t){return e(function(e){return{type:"ADD_PLACE",payload:e}}(t))},delPlace:function(t){return e(function(e){return{type:"DEL_PLACE",payload:e}}(t))},getDistance:function(t,a){return e(P(t,a))}}})(j);var k=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("h1",null,"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430"),r.a.createElement("div",{className:"description"},r.a.createElement("p",null,"1 \u0434\u0435\u043b\u0435\u043d\u0438\u0435 \u043a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442 \u043f\u0440\u0438\u0440\u0430\u0432\u043d\u0435\u043d\u043e \u043a 1 \u043c\u0435\u0442\u0440\u0443")),r.a.createElement("div",null,r.a.createElement(D,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var w=Object(i.d)(h,Object(i.a)(f.a));l.a.render(r.a.createElement(o.a,{store:w},r.a.createElement(k,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[20,1,2]]]);
//# sourceMappingURL=main.f54dd83a.chunk.js.map